<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>역 찾기 게임</title>
<link href="https://fonts.googleapis.com/css2?family=Orbit:wght@400&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  width:100vw;height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  font-family:"Orbit";
  cursor:none;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* 챕터 표시 */
#chapter-label{
  position:fixed;
  top:30px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  font-size:1.2rem;
  font-weight:bold;
  font-family:"Orbit", sans-serif;
  z-index:200;
  text-shadow:0 2px 10px rgba(0,0,0,0.5);
  letter-spacing:3px;
}

/* 프레임 이미지 */
#web-frame{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  object-fit:cover;
  z-index:9999;
  pointer-events:none;
}

/* 윈도우 노이즈 효과 */
#window-noise{
  position:fixed;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity:0.15;
  pointer-events:none;
  z-index:10000;
  mix-blend-mode:overlay;
  animation:noiseFlicker 0.1s infinite;
}

@keyframes noiseFlicker{
  0%,100%{opacity:0.1;}
  50%{opacity:0.2;}
}

/* 스캔라인 효과 */
#scanlines{
  position:fixed;
  inset:0;
  background:repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(0,0,0,0.1) 2px,
    rgba(0,0,0,0.1) 4px
  );
  pointer-events:none;
  z-index:10001;
}

#game-container{
  width:80vw;
  height:70vh;
  background:rgba(255,255,255,0.1);
  border:3px solid rgba(255,255,255,0.3);
  border-radius:20px;
  position:relative;
  backdrop-filter:blur(10px);
}

#map{
  width:100%;
  height:100%;
  position:relative;
  background:rgba(255,255,255,0.05);
  border-radius:17px;
}

#player{
  position:absolute;
  width:30px;
  height:30px;
  background:#4cff65;
  border:3px solid #fff;
  border-radius:5px;
  top:50%;
  left:20%;
  transform:translate(-50%,-50%);
  transition:all 0.2s;
  z-index:10;
  box-shadow:0 0 20px rgba(76,255,101,0.6);
}

#station{
  position:absolute;
  width:50px;
  height:50px;
  background:#ff6b6b;
  border:4px solid #fff;
  border-radius:50%;
  top:30%;
  right:25%;
  transform:translate(50%,-50%);
  z-index:5;
  box-shadow:0 0 30px rgba(255,107,107,0.8);
  animation:pulse 2s infinite;
}

@keyframes pulse{
  0%,100%{transform:translate(50%,-50%) scale(1);}
  50%{transform:translate(50%,-50%) scale(1.1);}
}

#noise-overlay{
  position:fixed;
  inset:0;
  background:rgba(255,0,0,0.2);
  opacity:0;
  pointer-events:none;
  z-index:100;
  transition:opacity 0.3s;
}

#noise-overlay.show{
  opacity:1;
}

#success-overlay{
  position:fixed;
  inset:0;
  background:rgba(76,255,101,0.3);
  opacity:0;
  pointer-events:none;
  z-index:100;
  transition:opacity 0.5s;
}

#success-overlay.show{
  opacity:1;
}

#success-message{
  position:fixed;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  background:rgba(255,255,255,0.95);
  padding:40px 60px;
  border-radius:20px;
  text-align:center;
  z-index:101;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.5s;
  box-shadow:0 10px 50px rgba(0,0,0,0.3);
}

#success-message.show{
  opacity:1;
  pointer-events:auto;
}

#success-message h2{
  font-size:2rem;
  color:#667eea;
  margin-bottom:20px;
}

#success-message p{
  font-size:1.2rem;
  color:#333;
  line-height:1.8;
  margin:10px 0;
}

#hint{
  position:fixed;
  bottom:30px;left:50%;
  transform:translateX(-50%);
  color:white;
  font-size:1rem;
  z-index:10;
  text-shadow:0 2px 10px rgba(0,0,0,0.5);
}

#cursor-dot{
  position:fixed;
  width:14px;height:14px;
  border-radius:50%;
  border:2px solid rgba(255,255,255,0.9);
  transform:translate(-50%,-50%);
  pointer-events:none;
  z-index:9999;
}
</style>
</head>
<body>

<img id="web-frame" src="web frame.png" alt="frame">
<div id="window-noise"></div>
<div id="scanlines"></div>
<div id="chapter-label">CHAPTER 4</div>
<div id="game-container">
  <div id="map">
    <div id="player"></div>
    <div id="station"></div>
  </div>
</div>

<div id="noise-overlay"></div>
<div id="success-overlay"></div>

<div id="success-message">
  <h2>역을 찾았어요!</h2>
  <p>"이제는 내가 길을 찾을 수 있어."</p>
  <p>"여기서도 살아갈 수 있을 것 같아."</p>
  <p>"아… 여기도 나쁘지 않다."</p>
</div>

<div id="hint">화살표 키로 이동하세요</div>
<div id="cursor-dot"></div>

<script>
const player = document.getElementById("player");
const station = document.getElementById("station");
const noiseOverlay = document.getElementById("noise-overlay");
const successOverlay = document.getElementById("success-overlay");
const successMessage = document.getElementById("success-message");
const cursor = document.getElementById("cursor-dot");

document.addEventListener("mousemove", e => {
  cursor.style.left = e.clientX + "px";
  cursor.style.top = e.clientY + "px";
});

let playerX = 20;
let playerY = 50;

const keys = {};
document.addEventListener("keydown", e => {
  keys[e.key] = true;
  movePlayer();
});

document.addEventListener("keyup", e => {
  keys[e.key] = false;
});

function movePlayer(){
  const step = 1.5;
  
  if(keys["ArrowUp"] || keys["w"] || keys["W"]){
    playerY = Math.max(5, playerY - step);
  }
  if(keys["ArrowDown"] || keys["s"] || keys["S"]){
    playerY = Math.min(95, playerY + step);
  }
  if(keys["ArrowLeft"] || keys["a"] || keys["A"]){
    playerX = Math.max(5, playerX - step);
  }
  if(keys["ArrowRight"] || keys["d"] || keys["D"]){
    playerX = Math.min(95, playerX + step);
  }
  
  player.style.left = playerX + "%";
  player.style.top = playerY + "%";
  
  checkStation();
  
  if(playerX < 10 || playerX > 90 || playerY < 10 || playerY > 90){
    noiseOverlay.classList.add("show");
    setTimeout(() => {
      noiseOverlay.classList.remove("show");
    }, 300);
  }
}

function checkStation(){
  const playerRect = player.getBoundingClientRect();
  const stationRect = station.getBoundingClientRect();
  
  const distance = Math.sqrt(
    Math.pow(playerRect.left + playerRect.width/2 - (stationRect.left + stationRect.width/2), 2) +
    Math.pow(playerRect.top + playerRect.height/2 - (stationRect.top + stationRect.height/2), 2)
  );
  
  if(distance < 50){
    successOverlay.classList.add("show");
    successMessage.classList.add("show");
    
    setTimeout(() => {
      location.href = "doors.html";
    }, 5000);
  }
}

setInterval(() => {
  if(Object.values(keys).some(k => k)){
    movePlayer();
  }
}, 16);
</script>

</body>
</html>
